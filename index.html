<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">

<meta name="viewport"
content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>Hagah 2026</title>
<link rel="manifest" href="manifest.json">

<style>
*{box-sizing:border-box;}

body{
 background:#f05a28;
 color:white;
 font-family:Arial, sans-serif;
 margin:0;
 height:100vh;
 display:flex;
 flex-direction:column;
}

/* APP */
#app{
 flex:1;
 display:flex;
 flex-direction:column;
 justify-content:center;
 align-items:center;
 padding:20px;
}

/* TITLE */
#title{
 font-size:10vw;
 font-weight:bold;
 text-shadow:2px 2px 6px rgba(0,0,0,.5);
 margin-bottom:10px;
}

/* SCORE */
#score{
 font-size:4vw;
 margin-bottom:10px;
}

/* NAV */
#nav{
 display:flex;
 justify-content:space-between;
 width:100%;
 max-width:500px;
 margin:10px 0;
}

.navBtn{
 width:48%;
 background:rgba(255,255,255,.25);
 border:none;
 color:white;
 padding:14px;
 border-radius:30px;
 font-size:4vw;
}

/* TODAY CARD */
#todayCard{
 width:100%;
 max-width:500px;
 background:rgba(255,255,255,.18);
 padding:18px;
 border-radius:25px;
 margin:15px 0;
 font-size:5vw;
 line-height:1.6;
 animation:pulse 2.5s infinite;
 box-shadow:0 4px 10px rgba(0,0,0,.4);
}

/* ANIMATION */
@keyframes pulse{
 0%{transform:scale(1);}
 50%{transform:scale(1.03);}
 100%{transform:scale(1);}
}

/* MAIN BUTTON */
#baca{
 width:100%;
 max-width:420px;
 background:#fff;
 color:#f05a28;
 border:none;
 padding:18px;
 font-size:5vw;
 font-weight:bold;
 border-radius:50px;
 box-shadow:0 6px 12px rgba(0,0,0,.4);
 margin-bottom:15px;
}

/* SHARE */
#shareBox{
 width:100%;
 max-width:500px;
 background:rgba(0,0,0,.15);
 padding:15px;
 border-radius:18px;
 text-align:center;
}

#shareTitle{
 font-weight:bold;
 margin-bottom:10px;
 font-size:4vw;
}

.shareGrid{
 display:grid;
 grid-template-columns:repeat(3,1fr);
 gap:10px;
}

.shareBtn{
 background:rgba(255,255,255,.25);
 border:none;
 color:white;
 padding:12px 5px;
 border-radius:15px;
 font-size:3.5vw;
}

/* WATERMARK */
#watermark{
 text-align:center;
 font-size:3vw;
 opacity:.85;
 padding:12px 5px;
 line-height:1.5;
}
</style>
</head>

<body>

<div id="app">

 <!-- TITLE -->
 <div style="width:100%;max-width:500px;text-align:center;">
  <div id="title">Hagah 2026</div>
 </div>

 <!-- SCORE -->
 <div id="score">Progress: 0%</div>

 <!-- NAV -->
 <div id="nav">
  <button class="navBtn" onclick="changeDay(-1)">‚óÄ Bacaan Kemarin</button>
  <button class="navBtn" onclick="changeDay(1)">Bacaan Besok ‚ñ∂</button>
 </div>

 <!-- TODAY -->
 <div id="todayCard">Loading...</div>

 <!-- MAIN BUTTON -->
 <button id="baca" onclick="openBible()">üìñ BACA SEKARANG</button>

 <!-- SHARE -->
 <div id="shareBox">
  <div id="shareTitle">Bagikan Renungan</div>
  <div class="shareGrid">
   <button class="shareBtn" onclick="shareWA()">WhatsApp</button>
   <button class="shareBtn" onclick="shareX()">X</button>
   <button class="shareBtn" onclick="shareFB()">Facebook</button>
   <button class="shareBtn" onclick="copyText()">Copy Text</button>
   <button class="shareBtn" onclick="shareIG()">Instagram</button>
   <button class="shareBtn" onclick="shareTT()">TikTok</button>
  </div>
 </div>

 <!-- HELP -->
 <div style="margin-top:15px;text-align:center;">
  <button onclick="openHelp()"
  style="
  background:rgba(255,255,255,.35);
  border:none;
  color:white;
  width:50px;
  height:50px;
  border-radius:50%;
  font-size:24px;
  box-shadow:0 4px 8px rgba(0,0,0,.4);
  ">
  ?
  </button>
 </div>

</div> <!-- END #app -->

<!-- WATERMARK -->
<div id="watermark">
Created by: Yohan Benyamin B.<br>
For: GBI El Shadai - Pontianak, 2026
</div>
 <script>
let currentDate=new Date();
let dataGlobal;
let shareText="";

/* LOAD DATA */
fetch('data.json')
.then(r=>{
 if(!r.ok) throw new Error("Gagal load data.json ("+r.status+")");
 return r.json();
})
.then(data=>{
 dataGlobal=data;
 render();
})
.catch(err=>{
 document.getElementById("todayCard").innerHTML =
 "‚ùå Gagal memuat data.json<br>"+err.message;
 console.error(err);
});

/* RENDER */
function render(){
 let key=formatDate(currentDate);
 let bacaan=dataGlobal[key]||"Tidak ada data";

 let tampil=
 formatHari(currentDate)+"\n"+
 "Pembacaan Alkitab:\n"+bacaan+
 "\n\nBaca di: "+location.href+
 "\n\n#Hagah2026";

 document.getElementById("todayCard").innerHTML=
 "<b>"+formatHari(currentDate)+"</b><br><br>"+
 "Pembacaan Alkitab Hari ini:<br>"+
 "<b>"+bacaan+"</b>";

 shareText=tampil;
 calcScore();
}

/* NAV */
function changeDay(step){
 currentDate.setDate(currentDate.getDate()+step);
 render();
}

function openBible(){
 let kitab=bacaanNama();
 let pasal=shareText.match(/\d+/)[0];
 window.open("https://alkitab.mobi/tb/"+kitab+"/"+pasal);
}

function bacaanNama(){
 return shareText.split("\n")[2].split(" ")[0];
}

/* SHARE */
function shareWA(){
 window.open("https://wa.me/?text="+encodeURIComponent(shareText));
}

function shareX(){
 window.open("https://twitter.com/intent/tweet?text="+
 encodeURIComponent(shareText));
}

function shareFB(){
 window.open(
 "https://www.facebook.com/sharer/sharer.php?u="+
 encodeURIComponent(location.href));
}

function copyText(){
 navigator.clipboard.writeText(shareText);
 alert("Teks berhasil disalin!");
}

function shareIG(){
 copyText();
 alert("Tempel di Instagram");
}

function shareTT(){
 copyText();
 alert("Tempel di TikTok");
}

/* SCORE */
function calcScore(){
 let start=new Date("2026-01-01");
 let today=new Date();
 let diff=Math.floor((today-start)/86400000)+1;
 let done=Math.min(diff,365);
 let percent=Math.round((done/365)*100);
 document.getElementById("score").innerHTML=
 "Progress Bacaan: <b>"+percent+"%</b>";
}

/* UTIL */
function formatDate(d){
 let y=d.getFullYear();
 let m=String(d.getMonth()+1).padStart(2,'0');
 let da=String(d.getDate()).padStart(2,'0');
 return y+"-"+m+"-"+da;
}

function formatHari(d){
 let h=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"];
 return h[d.getDay()]+", "+
 String(d.getDate()).padStart(2,'0')+"-"+
 String(d.getMonth()+1).padStart(2,'0')+"-"+d.getFullYear();
}

/* SWIPE */
let xStart=null;
document.addEventListener("touchstart",e=>{
 xStart=e.touches[0].clientX;
});

document.addEventListener("touchend",e=>{
 if(!xStart)return;
 let xEnd=e.changedTouches[0].clientX;
 let diff=xStart-xEnd;
 if(diff>50) changeDay(1);
 if(diff<-50) changeDay(-1);
 xStart=null;
});

/* HELP */
function openHelp(){
 window.location.href="readme.html";
}
</script>
</body>
</html>
